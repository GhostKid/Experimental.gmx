<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>tile_window_spr = spr_TileWindow
tile_window_icon = spr_TileWindowIcon

object_slot = obj_ObjectSlot
button = obj_Button
button_spr = spr_Button

tilepreview = obj_TilePreview

floor_menu_open = false
floor_menuarea1_open = false
floor_menuarea2_open = false
floor_menuarea3_open = false
floor_menuarea4_open = false

wall_menu_open = false
wall_menuarea1_open = false
wall_menuarea2_open = false
wall_menuarea3_open = false
wall_menuarea4_open = false

d_floor = false
d_wall = false
d_collider = false

collider = obj_Collider
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var _x = window_mouse_get_x()
var _y = window_mouse_get_y()

//Menu area 1
if _x &gt; 34 and _x &lt; 124
{
    if mouse_check_button_pressed(mb_left)
    {
        //floor menu button
        if _y &lt; 164 and _y &gt; 74 and floor_menu_open == false
        {
            if obj_TilePreview.clicked == 1
            {
            obj_TilePreview.clicked = 0 
            obj_TilePreview.canPlace = false
            obj_TilePreview.draw_something = false
            }
            floor_menu_open = true
            wall_menu_open = false
            
            d_floor = true
            d_wall = false
            d_collider = false
            
            floor_menuarea1_open = false
            floor_menuarea2_open = false
            floor_menuarea3_open = false
            floor_menuarea4_open = false
            
            wall_menuarea1_open = false
            wall_menuarea2_open = false
            wall_menuarea3_open = false
            wall_menuarea4_open = false
        }
        //wall menu button
        if _y &lt; 284 and _y &gt; 194 and wall_menu_open == false
        {
            if obj_TilePreview.clicked == 1
            {
            obj_TilePreview.clicked = 0 
            obj_TilePreview.canPlace = false
            obj_TilePreview.draw_something = false
            }
                
            floor_menu_open = false
            wall_menu_open = true 
            
            d_floor = false
            d_wall = true
            d_collider = false
            
            floor_menuarea1_open = false
            floor_menuarea2_open = false
            floor_menuarea3_open = false
            floor_menuarea4_open = false
            
            wall_menuarea1_open = false
            wall_menuarea2_open = false
            wall_menuarea3_open = false
            wall_menuarea4_open = false
        }
        //Collider obj
        if _y &gt; 480 and _y &lt; 570
        {
            if obj_TilePreview.clicked == 1
            { 
            obj_TilePreview.canPlace = false
            obj_TilePreview.draw_something = true
            obj_TilePreview.alarm[0] = 2
            }
            
            floor_menu_open = false
            wall_menu_open = false
            
            d_floor = false
            d_wall = false
            d_collider = true
            
            floor_menuarea1_open = false
            floor_menuarea2_open = false
            floor_menuarea3_open = false
            floor_menuarea4_open = false
            
            wall_menuarea1_open = false
            wall_menuarea2_open = false
            wall_menuarea3_open = false
            wall_menuarea4_open = false
        }
    }
}
//Floor menu
if floor_menu_open == true
{
    if _x &gt; 194 and _x &lt; 284
    {
        if mouse_check_button_pressed(mb_left)
        {
            //Area 1 button
            if _y &lt; 172 and _y &gt; 84
            {
                floor_menuarea1_open = true
                floor_menuarea2_open = false
                floor_menuarea3_open = false
                floor_menuarea4_open = false
                
                obj_TilePreview.bg = ts_area1_floors1
            }
            //Area 2 button
            if _y &lt; 300 and _y &gt; 210
            {
                floor_menuarea1_open = false
                floor_menuarea2_open = true
                floor_menuarea3_open = false
                floor_menuarea4_open = false
                
                //obj_TilePreview.bg = ts_area1_floors2
            }
            //Area 3 button
            if _y &lt; 428 and _y &gt; 338
            {
                floor_menuarea1_open = false
                floor_menuarea2_open = false
                floor_menuarea3_open = true
                floor_menuarea4_open = false
                
                //obj_TilePreview.bg = ts_area1_floors3
            }
        }
    }
}
//Wall menu
if wall_menu_open == true
{
    if _x &gt; 194 and _x &lt; 284
    {
        if mouse_check_button_pressed(mb_left)
        {
            //Area 1 button
            if _y &lt; 172 and _y &gt; 84
            {
                wall_menuarea1_open = true
                wall_menuarea2_open = false
                wall_menuarea3_open = false
                wall_menuarea4_open = false
                
                obj_TilePreview.bg = ts_area1_walls1
            }
            //Area 2 button
            if _y &lt; 300 and _y &gt; 210
            {
                wall_menuarea1_open = false
                wall_menuarea2_open = true
                wall_menuarea3_open = false
                wall_menuarea4_open = false
                
                //obj_TilePreview.bg = ts_area1_walls2
            }
            //Area 3 button
            if _y &lt; 428 and _y &gt; 338
            {
                wall_menuarea1_open = false
                wall_menuarea2_open = false
                wall_menuarea3_open = true
                wall_menuarea4_open = false
                                
                //obj_TilePreview.bg = ts_area1_walls3
            }
        }
    }
}

//Adding tiles
if mouse_check_button_pressed(mb_left) and (floor_menuarea1_open or floor_menuarea2_open or floor_menuarea3_open
or floor_menuarea4_open or wall_menuarea1_open or wall_menuarea2_open or wall_menuarea3_open or wall_menuarea4_open)
{
    for (i = 0; i &lt; 3; i++)
    {
        if(mouse_x &gt; view_xview[0]+170+(i*2)*20 &amp;&amp; mouse_x &lt;  view_xview[0]+202+(i*2)*20)
        {
            for (j = 0; j &lt; 3; j++)
            {
                if(mouse_y &gt; view_yview[0]+40+(j*2)*20 &amp;&amp; mouse_y &lt; view_yview[0]+72+(j*2)*20)
                {
                    with(obj_TilePreview)
                    {
                        tile_x = other.i
                        tile_y = other.j
                        
                        clicked = 1
                        alarm[0] = 2
                        
                        draw_something = true
                    }
                    
                    floor_menu_open = false
                    wall_menu_open = false
                        
                    floor_menuarea1_open = false
                    floor_menuarea2_open = false
                    floor_menuarea3_open = false
                    floor_menuarea4_open = false
                        
                    wall_menuarea1_open = false
                    wall_menuarea2_open = false
                    wall_menuarea3_open = false
                    wall_menuarea4_open = false
                }
            }
        }
    }
}

//SCROOLING OMG 
if keyboard_check(vk_right) and view_xview[0] &lt; 1024
{
    view_xview[0] += 8         
}
if keyboard_check(vk_left) and view_xview[0] &gt; 0
{
    view_xview[0] -= 8
}
if keyboard_check(vk_up) and view_yview[0] &gt; 0
{
    view_yview[0] -= 8
}
if keyboard_check(vk_down) and view_yview[0] &lt; 768
{
   view_yview[0] += 8
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_halign(fa_center)
draw_set_valign(fa_center)
draw_set_color(c_white)
draw_set_font(fn_game)
draw_sprite_ext(tile_window_spr,0,view_xview[0]+40,view_yview[0]+160,2,2,0,c_black,0.4)
//Floors
draw_sprite_ext(tile_window_icon,0,view_xview[0]+40,view_yview[0]+60,1.4,1.4,0,c_black,1)
draw_text(view_xview[0] + 40,view_yview[0]+60,string("F"))
//FLOOR object menu
if floor_menu_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+120,view_yview[0]+160,2,2,0,c_black,0.4)
    
    for (i = 0; i &lt; 4; i++)
    {
        draw_sprite_ext(button_spr,0,view_xview[0]+120,view_yview[0]+64+(i*64),0.7,0.7,0,c_white,1)
        draw_text(view_xview[0]+120,view_yview[0]+64+(i*64),"A"+string(other.i+1))
    }
}
//Pick texture
if floor_menuarea1_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+114*2,view_yview[0]+160,4,2,0,c_black,0.4)
    
    for (i = 0; i &lt; 3; i++)
    {
        for (j = 0; j &lt; 3; j++)
        {
            draw_background_part_ext(ts_area1_floors1,i*32,j*32,32,32,view_xview[0]+170+(i*2)*20,view_yview[0]+40+(j*2)*20,1,1,c_white,1)
        }
    }
}
if floor_menuarea2_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+114*2,view_yview[0]+160,4,2,0,c_black,0.4)
    
    for (i = 0; i &lt; 3; i++)
    {
        for (j = 0; j &lt; 3; j++)
        {
            //draw_background_part_ext(ts_area1_floors2,i*32,j*32,32,32,view_xview[0]+170+(i*2)*20,view_yview[0]+40+(j*2)*20,1,1,c_white,1)
        }
    }
}
//Walls
draw_sprite_ext(tile_window_icon,0,view_xview[0]+40,view_yview[0]+60*2,1.4,1.4,0,c_black,1)
draw_text(view_xview[0] + 40,view_yview[0]+60*2,string("W"))

if wall_menu_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+120,view_yview[0]+160,2,2,0,c_black,0.4)
    
    for (i = 0; i &lt; 4; i++)
    {
        draw_sprite_ext(button_spr,0,view_xview[0]+120,view_yview[0]+64+(i*64),0.7,0.7,0,c_white,1)
        draw_text(view_xview[0]+120,view_yview[0]+64+(i*64),"A"+string(other.i+1))
    }
}
//Wall menu area 1
if wall_menuarea1_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+114*2,view_yview[0]+160,4,2,0,c_black,0.4)
    
    for (i = 0; i &lt; 3; i++)
    {
        for (j = 0; j &lt; 3; j++)
        {
            //Outter walls
            draw_background_part_ext(ts_area1_walls1,i*32,j*32,32,32,view_xview[0]+170+(i*2)*20,view_yview[0]+40+(j*2)*20,1,1,c_white,1)
        }
    }
}
//Wall menu area 2
if wall_menuarea2_open == true
{
    draw_sprite_ext(tile_window_spr,0,view_xview[0]+114*2,view_yview[0]+160,4,2,0,c_black,0.4)

    for (i = 0; i &lt; 3; i++)
    {
        for (j = 0; j &lt; 3; j++)
        {
            //draw_background_part_ext(ts_area1_walls2,i*32,j*32,32,32,view_xview[0]+170+(i*2)*20,view_yview[0]+40+(j*2)*20,1,1,c_white,1)
        }
    }
}
//Props
draw_sprite_ext(tile_window_icon,0,view_xview[0]+40,view_yview[0]+60*3,1.4,1.4,0,c_black,1)
draw_text(view_xview[0] + 40,view_yview[0]+60*3,string("P"))

draw_sprite_ext(spr_collider,0,view_xview[0]+18, view_yview[0]+60*4,1.4,1.4,0,c_white,1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_restart()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="80">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>popup = get_string("WRITE FILE", "Name the room")
ini_open(popup+".ini")
            
var num = tile_get_count();
for (var b = 0; b &lt; num; b++)
{
    ini_write_real("tile"+string(b), "bg", tile_get_background(tile_get_id(b)))
    ini_write_real("tile"+string(b), "x_pos", tile_get_x(tile_get_id(b)))
    ini_write_real("tile"+string(b), "y_pos", tile_get_y(tile_get_id(b)))
    ini_write_real("tile"+string(b), "left", tile_get_left(tile_get_id(b)))
    ini_write_real("tile"+string(b), "top", tile_get_top(tile_get_id(b)))   
    ini_write_real("tile"+string(b), "depth", tile_get_depth(tile_get_id(b)))
}
            
ini_close()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="79">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

var file = get_open_filename_ext("*.ini","",working_directory,"Choose a room to open")

ini_open(file)

for(i = 0; i &lt; 100; i++)
{
    var bg = ini_read_real("tile"+string(i),"bg",-1)
    if bg == -1
    {
        break
    }
    var x_pos = ini_read_real("tile"+string(i),"x_pos",-1)
    var y_pos = ini_read_real("tile"+string(i),"y_pos",-1)
    var left = ini_read_real("tile"+string(i),"left",-1)
    var top = ini_read_real("tile"+string(i),"top",-1)
    var _depth = ini_read_real("tile"+string(i),"depth",-1)   
    
    tile_add(bg,left,top,32,32,x_pos,y_pos,_depth)
}

ini_close()
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
